# FieldTest Hub - Local Vocabulary
# Domain-specific patterns for hardware field testing and beta programs
#
# Usage: These patterns can be used with @use directives in DSL files
# Example: @use device_status_enum()

version: 1.0.0
app_id: fieldtest_hub
dsl_core_version: 1.0.0

entries:
  # ========================================================================
  # COMMON DATA PATTERNS
  # ========================================================================

  - id: audit_fields
    kind: macro
    scope: data
    dsl_core_version: 1.0.0
    description: Standard audit timestamp fields (created_at, updated_at)
    parameters: []
    expansion:
      language: dazzle-core-dsl
      body: |
        created_at: datetime auto_add
        updated_at: datetime auto_update
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - audit
      - timestamp
      - common

  # ========================================================================
  # FIELD TESTING PATTERNS
  # ========================================================================

  - id: device_status_enum
    kind: macro
    scope: data
    dsl_core_version: 1.0.0
    description: Device lifecycle status (prototype, active, recalled, retired)
    parameters:
      - name: default_value
        type: string
        required: false
        default: prototype
        description: Default device status
    expansion:
      language: dazzle-core-dsl
      body: "status: enum[prototype,active,recalled,retired]={{ default_value }}"
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - enum
      - device
      - lifecycle
      - fieldtest

  - id: issue_status_enum
    kind: macro
    scope: data
    dsl_core_version: 1.0.0
    description: Issue report lifecycle status
    parameters:
      - name: default_value
        type: string
        required: false
        default: open
        description: Default issue status
    expansion:
      language: dazzle-core-dsl
      body: "status: enum[open,triaged,in_progress,fixed,verified,closed]={{ default_value }}"
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - enum
      - issue
      - lifecycle
      - fieldtest

  - id: severity_enum
    kind: macro
    scope: data
    dsl_core_version: 1.0.0
    description: Issue severity levels (low, medium, high, critical)
    parameters:
      - name: default_value
        type: string
        required: false
        default: medium
        description: Default severity value
    expansion:
      language: dazzle-core-dsl
      body: "severity: enum[low,medium,high,critical]={{ default_value }}"
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - enum
      - severity
      - issue
      - common

  - id: issue_category_enum
    kind: macro
    scope: data
    dsl_core_version: 1.0.0
    description: Issue category classification for hardware testing
    parameters:
      - name: default_value
        type: string
        required: false
        default: other
        description: Default category
    expansion:
      language: dazzle-core-dsl
      body: "category: enum[battery,connectivity,mechanical,overheating,crash,other]={{ default_value }}"
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - enum
      - category
      - issue
      - hardware

  - id: skill_level_enum
    kind: macro
    scope: data
    dsl_core_version: 1.0.0
    description: Tester skill level classification
    parameters:
      - name: default_value
        type: string
        required: false
        default: casual
        description: Default skill level
    expansion:
      language: dazzle-core-dsl
      body: "skill_level: enum[casual,enthusiast,engineer]={{ default_value }}"
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - enum
      - skill
      - tester
      - fieldtest

  - id: environment_enum
    kind: macro
    scope: data
    dsl_core_version: 1.0.0
    description: Testing environment classification
    parameters:
      - name: default_value
        type: string
        required: false
        default: indoor
        description: Default environment
    expansion:
      language: dazzle-core-dsl
      body: "environment: enum[indoor,outdoor,vehicle,industrial,other]={{ default_value }}"
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - enum
      - environment
      - testing
      - fieldtest

  - id: firmware_fields
    kind: macro
    scope: data
    dsl_core_version: 1.0.0
    description: Firmware version and batch tracking fields
    parameters: []
    expansion:
      language: dazzle-core-dsl
      body: |
        firmware_version: str(50)
        batch_number: str(100) required
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - firmware
      - version
      - tracking
      - hardware

  - id: photo_url_field
    kind: alias
    scope: data
    dsl_core_version: 1.0.0
    description: URL field for photo/evidence attachments
    parameters:
      - name: field_name
        type: string
        required: false
        default: photo_url
        description: Name of the photo URL field
    expansion:
      language: dazzle-core-dsl
      body: "{{ field_name }}: str(500)"
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - photo
      - media
      - attachment
      - common

  - id: active_status_field
    kind: alias
    scope: data
    dsl_core_version: 1.0.0
    description: Active/inactive boolean flag
    parameters:
      - name: field_name
        type: string
        required: false
        default: active
        description: Name of the active flag field
    expansion:
      language: dazzle-core-dsl
      body: "{{ field_name }}: bool=true"
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - active
      - flag
      - status
      - common

  # ========================================================================
  # ENTITY TEMPLATES
  # ========================================================================

  - id: device_entity
    kind: pattern
    scope: data
    dsl_core_version: 1.0.0
    description: Field test device entity with tracking fields
    parameters:
      - name: entity_name
        type: string
        required: false
        default: Device
        description: Name of the device entity
    expansion:
      language: dazzle-core-dsl
      body: |
        entity {{ entity_name }} "{{ entity_name }}":
          id: uuid pk
          name: str(200) required
          model: str(200) required
          batch_number: str(100) required
          serial_number: str(100) required unique
          firmware_version: str(50)
          status: enum[prototype,active,recalled,retired]=prototype
          assigned_tester_id: uuid
          deployed_at: datetime
          created_at: datetime auto_add
          updated_at: datetime auto_update
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - entity
      - device
      - hardware
      - template

  - id: tester_entity
    kind: pattern
    scope: data
    dsl_core_version: 1.0.0
    description: Field tester entity with skill and location
    parameters:
      - name: entity_name
        type: string
        required: false
        default: Tester
        description: Name of the tester entity
    expansion:
      language: dazzle-core-dsl
      body: |
        entity {{ entity_name }} "{{ entity_name }}":
          id: uuid pk
          name: str(200) required
          email: str(255) required unique
          location: str(200) required
          skill_level: enum[casual,enthusiast,engineer]=casual
          joined_at: datetime auto_add
          active: bool=true
          created_at: datetime auto_add
          updated_at: datetime auto_update
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - entity
      - tester
      - people
      - template

  - id: issue_report_entity
    kind: pattern
    scope: data
    dsl_core_version: 1.0.0
    description: Issue report entity for field testing feedback
    parameters:
      - name: entity_name
        type: string
        required: false
        default: IssueReport
        description: Name of the issue entity
    expansion:
      language: dazzle-core-dsl
      body: |
        entity {{ entity_name }} "Issue Report":
          id: uuid pk
          device_id: uuid required
          reported_by_id: uuid required
          category: enum[battery,connectivity,mechanical,overheating,crash,other]=other
          severity: enum[low,medium,high,critical]=medium
          description: text required
          steps_to_reproduce: text
          photo_url: str(500)
          reported_at: datetime auto_add
          status: enum[open,triaged,in_progress,fixed,verified,closed]=open
          resolution: text
          firmware_version: str(50)
          created_at: datetime auto_add
          updated_at: datetime auto_update
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - entity
      - issue
      - report
      - template

  - id: test_session_entity
    kind: pattern
    scope: data
    dsl_core_version: 1.0.0
    description: Test session log for tracking device usage
    parameters:
      - name: entity_name
        type: string
        required: false
        default: TestSession
        description: Name of the session entity
    expansion:
      language: dazzle-core-dsl
      body: |
        entity {{ entity_name }} "Test Session":
          id: uuid pk
          device_id: uuid required
          tester_id: uuid required
          duration_minutes: int
          environment: enum[indoor,outdoor,vehicle,industrial,other]=indoor
          temperature: decimal(5,2)
          notes: text
          logged_at: datetime auto_add
          created_at: datetime auto_add
          updated_at: datetime auto_update
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - entity
      - session
      - testing
      - template

  # ========================================================================
  # UI PATTERNS
  # ========================================================================

  - id: crud_surface_set
    kind: pattern
    scope: ui
    dsl_core_version: 1.0.0
    description: Complete CRUD surface set (list, detail, create, edit)
    parameters:
      - name: entity_name
        type: string
        required: true
        description: Name of the entity
      - name: title_field
        type: string
        required: true
        description: Primary display field
    expansion:
      language: dazzle-core-dsl
      body: |
        surface {{ entity_name | lower }}_list "{{ entity_name }} List":
          uses entity {{ entity_name }}
          mode: list
          section main "{{ entity_name }}s":
            field {{ title_field }} "{{ title_field | title }}"

        surface {{ entity_name | lower }}_detail "{{ entity_name }} Detail":
          uses entity {{ entity_name }}
          mode: view
          section main "{{ entity_name }} Details":
            field {{ title_field }} "{{ title_field | title }}"

        surface {{ entity_name | lower }}_create "Create {{ entity_name }}":
          uses entity {{ entity_name }}
          mode: create
          section main "New {{ entity_name }}":
            field {{ title_field }} "{{ title_field | title }}"

        surface {{ entity_name | lower }}_edit "Edit {{ entity_name }}":
          uses entity {{ entity_name }}
          mode: edit
          section main "Edit {{ entity_name }}":
            field {{ title_field }} "{{ title_field | title }}"
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - crud
      - ui
      - pattern
      - common
