# Contact Manager - Local Vocabulary
# Domain-specific patterns for contact/CRM management
#
# Usage: These patterns can be used with @use directives in DSL files
# Example: @use contact_fields()

version: 1.0.0
app_id: contact_manager
dsl_core_version: 1.0.0

entries:
  # ========================================================================
  # COMMON DATA PATTERNS
  # ========================================================================

  - id: audit_fields
    kind: macro
    scope: data
    dsl_core_version: 1.0.0
    description: Standard audit timestamp fields (created_at, updated_at)
    parameters: []
    expansion:
      language: dazzle-core-dsl
      body: |
        created_at: datetime auto_add
        updated_at: datetime auto_update
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - audit
      - timestamp
      - common

  # ========================================================================
  # CRM-SPECIFIC PATTERNS
  # ========================================================================

  - id: contact_name_fields
    kind: macro
    scope: data
    dsl_core_version: 1.0.0
    description: First and last name fields for person contacts
    parameters:
      - name: first_max_length
        type: number
        required: false
        default: 100
        description: Max length for first name
      - name: last_max_length
        type: number
        required: false
        default: 100
        description: Max length for last name
    expansion:
      language: dazzle-core-dsl
      body: |
        first_name: str({{ first_max_length }}) required
        last_name: str({{ last_max_length }}) required
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - contact
      - name
      - crm
      - common

  - id: contact_info_fields
    kind: macro
    scope: data
    dsl_core_version: 1.0.0
    description: Email and phone contact information
    parameters:
      - name: email_required
        type: boolean
        required: false
        default: true
        description: Whether email is required
      - name: email_unique
        type: boolean
        required: false
        default: true
        description: Whether email must be unique
    expansion:
      language: dazzle-core-dsl
      body: |
        email: email{% if email_unique %} unique{% endif %}{% if email_required %} required{% endif %}
        phone: str(20)
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - contact
      - email
      - phone
      - crm

  - id: company_fields
    kind: macro
    scope: data
    dsl_core_version: 1.0.0
    description: Company and job title fields for business contacts
    parameters:
      - name: company_max_length
        type: number
        required: false
        default: 200
        description: Max length for company name
      - name: title_max_length
        type: number
        required: false
        default: 150
        description: Max length for job title
    expansion:
      language: dazzle-core-dsl
      body: |
        company: str({{ company_max_length }})
        job_title: str({{ title_max_length }})
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - company
      - business
      - crm

  - id: favorite_field
    kind: alias
    scope: data
    dsl_core_version: 1.0.0
    description: Boolean field to mark favorites/starred items
    parameters:
      - name: field_name
        type: string
        required: false
        default: is_favorite
        description: Name of the favorite field
    expansion:
      language: dazzle-core-dsl
      body: "{{ field_name }}: bool=false"
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - favorite
      - flag
      - common

  # ========================================================================
  # UI PATTERNS
  # ========================================================================

  - id: crud_surface_set
    kind: pattern
    scope: ui
    dsl_core_version: 1.0.0
    description: Complete CRUD surface set (list, detail, create, edit)
    parameters:
      - name: entity_name
        type: string
        required: true
        description: Name of the entity
      - name: title_field
        type: string
        required: true
        description: Primary display field
    expansion:
      language: dazzle-core-dsl
      body: |
        surface {{ entity_name | lower }}_list "{{ entity_name }} List":
          uses entity {{ entity_name }}
          mode: list
          section main "{{ entity_name }}s":
            field {{ title_field }} "{{ title_field | title }}"

        surface {{ entity_name | lower }}_detail "{{ entity_name }} Detail":
          uses entity {{ entity_name }}
          mode: view
          section main "{{ entity_name }} Details":
            field {{ title_field }} "{{ title_field | title }}"

        surface {{ entity_name | lower }}_create "Create {{ entity_name }}":
          uses entity {{ entity_name }}
          mode: create
          section main "New {{ entity_name }}":
            field {{ title_field }} "{{ title_field | title }}"

        surface {{ entity_name | lower }}_edit "Edit {{ entity_name }}":
          uses entity {{ entity_name }}
          mode: edit
          section main "Edit {{ entity_name }}":
            field {{ title_field }} "{{ title_field | title }}"
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - crud
      - ui
      - pattern
      - common

  # ========================================================================
  # ENTITY TEMPLATES
  # ========================================================================

  - id: contact_entity
    kind: pattern
    scope: data
    dsl_core_version: 1.0.0
    description: Complete contact entity template for CRM applications
    parameters:
      - name: entity_name
        type: string
        required: false
        default: Contact
        description: Name of the contact entity
    expansion:
      language: dazzle-core-dsl
      body: |
        entity {{ entity_name }} "{{ entity_name }}":
          id: uuid pk
          first_name: str(100) required
          last_name: str(100) required
          email: email unique required
          phone: str(20)
          company: str(200)
          job_title: str(150)
          notes: text
          is_favorite: bool=false
          created_at: datetime auto_add
          updated_at: datetime auto_update
    metadata:
      stability: stable
      source: user
      created_at: "2025-12-11T00:00:00Z"
      usage_count: 0
    tags:
      - entity
      - contact
      - crm
      - template
