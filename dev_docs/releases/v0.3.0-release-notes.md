# DAZZLE v0.3.0 Release Notes

**Release Date**: December 2025
**Status**: Release Candidate

---

## Highlights

DAZZLE v0.3.0 represents a **fundamental shift** from code generation to native runtime. The **Dazzle Native Runtime (DNR)** now runs applications directly from DSL specificationsâ€”no code generation required.

### The DNR Era

```bash
# Before (v0.1.x): Generate, then deploy
dazzle build --stack express_micro
cd build && npm install && npm start

# Now (v0.3.0): Just run
dazzle dnr serve
```

**One command. Instant app.**

---

## New Features

### Dazzle Native Runtime (DNR)

#### Backend Runtime
- **FastAPI server** auto-generated from entities
- **SQLite persistence** with auto-migration
- **CRUD endpoints** for all entities
- **OpenAPI documentation** at `/docs`

#### Frontend Runtime
- **Signals-based UI** (no virtual DOM overhead)
- **Combined server** architecture (backend + frontend)
- **Hot reload** via SSE
- **Vite integration** for production builds

#### Authentication & Authorization
- Session-based authentication with secure cookies
- PBKDF2 password hashing
- Row-level security (owner-based, tenant-based, role-based)
- Auto-detection of User entities
- Protected routes with dependency injection

#### File Uploads & Rich Fields
- Local and S3-compatible storage backends
- Image processing with thumbnails
- Markdown to HTML rendering with sanitization
- Secure filename handling

#### Relationships & Queries
- Foreign key relationships with nested data fetching
- Advanced filter operators (eq, ne, gt, contains, between, etc.)
- Multi-field sorting
- Full-text search via SQLite FTS5
- Pagination support

#### Real-time & Collaboration
- WebSocket support for live updates
- Presence tracking (who's viewing what)
- Optimistic UI updates
- Entity sync for auto-updating signals

### UI Semantic Layout Engine

#### 5 Layout Archetypes
| Archetype | Best For |
|-----------|----------|
| `FOCUS_METRIC` | Single KPI dashboards (uptime, revenue) |
| `SCANNER_TABLE` | Data tables with filters (admin panels) |
| `DUAL_PANE_FLOW` | Master-detail views (email, documents) |
| `MONITOR_WALL` | Multi-widget dashboards |
| `COMMAND_CENTER` | Expert operations consoles |

#### Attention Signals
- Automatic inference from workspace regions
- Priority weighting based on filters/limits/aggregates
- Surface allocation with capacity management
- Over-budget signal handling

#### Engine Variants
| Variant | Description |
|---------|-------------|
| `classic` | Default balanced layout (1.0x spacing) |
| `dense` | Higher density for power users (0.75x spacing) |
| `comfortable` | More whitespace for readability (1.25x spacing) |

#### Layout Planning CLI
```bash
# Generate layout plan
dazzle layout-plan

# With archetype selection explanation
dazzle layout-plan --explain

# For specific workspace
dazzle layout-plan --workspace dashboard

# JSON output
dazzle layout-plan --json
```

### New CLI Commands

```bash
# DNR commands
dazzle dnr serve              # Start app (backend + frontend)
dazzle dnr build-ui           # Build production UI bundle
dazzle dnr build-api          # Generate OpenAPI spec
dazzle dnr info               # Show project info

# Layout commands
dazzle layout-plan            # Visualize layout plans
dazzle layout-plan --explain  # Explain archetype selection
```

### IR Enhancements

- `WorkspaceLayout.engine_options` for archetype customization
- `SelectionExplanation` for debugging archetype selection
- `EngineVariant` enum (classic, dense, comfortable)

---

## Example Projects

| Example | Archetype | Purpose |
|---------|-----------|---------|
| `simple_task` | SCANNER_TABLE | Basic CRUD |
| `contact_manager` | DUAL_PANE_FLOW | List + detail |
| `uptime_monitor` | FOCUS_METRIC | KPI dashboard |
| `email_client` | MONITOR_WALL | Multi-signal |
| `inventory_scanner` | SCANNER_TABLE | Data tables |
| `ops_dashboard` | COMMAND_CENTER | Operations |
| `archetype_showcase` | All | Demo all archetypes |

---

## Deprecated Features

The following legacy code generation stacks are **deprecated**:

| Stack | Status | Migration |
|-------|--------|-----------|
| `django_micro` | Deprecated | Use DNR |
| `django_micro_modular` | Deprecated | Use DNR |
| `django_api` | Deprecated | Use DNR |
| `express_micro` | Deprecated | Use DNR |
| `nextjs_onebox` | Deprecated | Use DNR |
| `nextjs_semantic` | Deprecated | Use DNR |

**Note**: The DSL syntax is fully compatible. Only the runtime changes.

Stacks still available:
- `openapi` - For API spec export
- `terraform` - For infrastructure
- `docker` - For DNR deployment (in progress)
- `base` - For custom stack development

---

## Breaking Changes

1. **Default runtime is DNR**: `dazzle dnr serve` is the primary way to run apps
2. **Legacy stacks deprecated**: Framework-specific generators will be removed in v0.4.0
3. **Examples updated**: All examples now use DNR by default

---

## Migration Guide

### From v0.1.x/v0.2.x

1. **No DSL changes required** - Your existing DSL files work as-is
2. **Replace build workflow**:
   ```bash
   # Old
   dazzle build --stack express_micro
   cd build && npm install && npm start

   # New
   dazzle dnr serve
   ```
3. **Remove generated code** - DNR doesn't generate code, it runs directly

### New Project Setup

```bash
# Create new project
mkdir my_app && cd my_app
dazzle init

# Edit DSL files
# ...

# Run immediately
dazzle dnr serve
```

---

## Technical Details

### Test Coverage

| Component | Tests | Coverage |
|-----------|-------|----------|
| DNR Backend | 65+ auth, 96+ files, 56+ queries | >85% |
| DNR Frontend | 44+ behaviour layer | >80% |
| Layout Engine | 30+ tests | >90% |
| Core Parser | 59+ tests | >95% |

### Performance

- Cold start: <3 seconds
- Hot reload: <500ms
- Zero configuration required

### Dependencies

- Python 3.11+
- FastAPI (backend)
- SQLite (database)
- Vite (frontend build)

---

## What's Next (v0.3.1)

- DSL file watching with instant reload
- Browser dev tools panel
- State inspector
- Action log viewer

---

## Contributors

This release was developed with AI co-authorship per DAZZLE contribution guidelines.

---

## Resources

- **Documentation**: `docs/` directory
- **Examples**: `examples/` directory
- **Issues**: GitHub Issues
- **Repository**: https://github.com/manwithacat/dazzle
